{% extends 'base/base.html' %}

{% block content %}
<!DOCTYPE html>
<html>
<head>
    <title>Add Driver</title>
</head>
<body>
    <h1>Add Driver</h1>
    <form id="addDriverForm">
        {% csrf_token %}
        <h2>Driver Information</h2>
        <label for="DriverName">Driver Name:</label>
        <input type="text" id="DriverName" name="DriverName" required><br><br>
        <label for="MobileNumber">Mobile Number:</label>
        <input type="text" id="MobileNumber" name="MobileNumber" required><br><br>
        <label for="LicenseNumber">License Number:</label>
        <input type="text" id="LicenseNumber" name="LicenseNumber" required><br><br>
        <label for="Salary">Salary:</label>
        <input type="number" id="Salary" name="Salary" required><br><br>

        <h2>Address Information</h2>
        <label for="Street">Street:</label>
        <input type="text" id="Street" name="Street" required><br><br>
        <label for="City">City:</label>
        <input type="text" id="City" name="City" required><br><br>
        <label for="Province">Province:</label>
        <input type="text" id="Province" name="Province" required><br><br>
        <label for="ZIPCode">ZIP Code:</label>
        <input type="text" id="ZIPCode" name="ZIPCode" required><br><br>
        <label for="Country">Country:</label>
        <input type="text" id="Country" name="Country" required><br><br>

        <button type="button" id="submitDriver">Submit</button>
    </form>

    <div id="responseMessage"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#submitDriver").click(function() {
                var DriverData = {
                    DriverName: $("#DriverName").val(),
                    MobileNumber: $("#MobileNumber").val(),
                    LicenseNumber: $("#LicenseNumber").val(),
                    Salary: $("#Salary").val()
                };

                var AddressData = {
                    Street: $("#Street").val(),
                    City: $("#City").val(),
                    Province: $("#Province").val(),
                    ZIPCode: $("#ZIPCode").val(),
                    Country: $("#Country").val()
                };

                $.ajax({
                    url: '/driver/insert/',  // Replace with your API endpoint
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({
                        DriverData: DriverData,
                        AddressData: AddressData
                    }),
                    headers: {
                          "X-CSRFToken": $("input[name='csrfmiddlewaretoken']").val(),
                    },
                    dataType: 'json',
                    success: function(response) {
                        $("#responseMessage").text(response.message);
                        // Clear form fields if needed
                    },
                    error: function(error) {
                        $("#responseMessage").text('Failed to add driver.');
                    }
                });
            });
        });
    </script>
</body>
</html>
{% endblock content %}
